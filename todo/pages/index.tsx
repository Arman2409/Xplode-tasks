import Head from 'next/head';
import styles from '../styles/Home.module.scss';
import Main from '../components/Todos/Todos';

export const getStaticProps = async () => {
  const fetchData:any = await fetch(process.env.SERVER_HOST + "/api/todos");
  const data:any = await fetchData.json();
  const todos:any[] = [];
  if(data.length > 0){
    for( let x of data) {
      todos.push(x);
   };
  };
  return {
    props: {
      todos
    }
  }
};

export default  function Home({todos}:any) {

  return (
    <div className={`${styles.container} ${styles.main}`}>
      <Head>
        <title>Todos</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <Main initialTodos={todos}/>
    </div>
  )
};
